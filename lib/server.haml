\# Auto-generated by vpnmaker on #{gen_host} #{Time.now.to_s}
\# See http://github.com/pc/vpnmaker
mode server
dev tun0
\#local #{host}
proto udp
port #{port}
server #{base_ip[:net]} #{base_ip[:mask]}
tls-server
comp-lzo
cipher AES-256-CBC
crl-verify /etc/openvpn/crl.pem

- unless subnets.empty?
  \# subnets.each do
  - subnets.each do |net|
    route #{net[:net]} #{net[:mask]}
    push route #{net[:net]} #{net[:mask]}

- unless bridgednets.empty?
  \# bridgednets.each do
  - bridgednets.each do |net|
    push route #{net[:net]} #{net[:mask]}
\
push "redirect-gateway"
client-to-client

user #{user}
group #{group}
- if type == :default

  <dh>
  #{dh}
  </dh>

  <ca>
  #{ca}
  </ca>

  <cert>
  #{cert}
  </cert>

  <key>
  #{key}
  </key>

  <tls-auth>
  #{ta}
  </tls-auth>

- else
  dh #{root}/keys/dh.pem
  ca #{root}/keys/ca.crt
  cert #{root}/keys/server.crt
  key #{root}/keys/server.key
  crl-verify #{root}/keys/crl.pem
  
keepalive 10 120
\#log #{log}
persist-tun
persist-key

:plain
